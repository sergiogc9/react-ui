import { ArgsTable, Meta, Story, Canvas } from 'storybook/utils/components';

import ActionMenuDecorator from 'storybook/decorators/ActionMenu';
import { getFixedStoryParams, getPlaygroundStoryParams } from 'storybook/parameters';
import ActionMenu from 'collections/ActionMenu';
import Button from 'components/Button';
import Flex from 'components/Flex';

<Meta title="Collections/ActionMenu" component={ActionMenu} decorators={[ActionMenuDecorator]} />

<Story name="playground" args={{ minWidth: 200, placement: 'bottom' }} parameters={getPlaygroundStoryParams()}>
	{args => (
		<ActionMenu {...args}>
			<ActionMenu.Item onClick={() => console.log('Edit')}>Edit</ActionMenu.Item>
			<ActionMenu.Item onClick={() => console.log('Clone')}>Clone</ActionMenu.Item>
			<ActionMenu.Item onClick={() => console.log('Archive')}>Archive</ActionMenu.Item>
			<ActionMenu.Item onClick={() => console.log('Delete')} variant="danger">
				Delete
			</ActionMenu.Item>
		</ActionMenu>
	)}
</Story>

# ActionMenu

The Action Menu is a `PopoverContent` wrapper in order to show a drop down when hovering or clicking an element.

Most important features:

- It is a `Popover.Content` component, hence it inherits all its props.
- Includes the `ActionMenu.Item` namespaced component ready to use

## Usage

Look for `Popover` docs for further info. Use the `reference` prop with a ref linked to the component that acts as the trigger.

```tsx
const App = props => {
	const triggerRef = React.useRef();

	return (
		<>
			<Flex cursor="pointer" ref={triggerRef}>
				I am the trigger ðŸ˜„
			</Flex>
			<ActionMenu reference={triggerRef}>
				<ActionMenu.Item onClick={() => console.log('Edit')}>Edit</ActionMenu.Item>
				<ActionMenu.Item onClick={() => console.log('Clone')}>Clone</ActionMenu.Item>
				<ActionMenu.Item onClick={() => console.log('Archive')}>Archive</ActionMenu.Item>
				<ActionMenu.Item onClick={() => console.log('Delete')} variant="danger">
					Delete
				</ActionMenu.Item>
			</ActionMenu>
		</>
	);
};
```

## Positioning

Use the `placement` prop to place the component. Example with some placements:

<Canvas>
	<Story
		name="left-start"
		args={{
			minWidth: 200,
			placement: 'left-start',
			title: 'left-start'
		}}
		parameters={getFixedStoryParams()}
	>
		{args => (
			<ActionMenu {...args}>
				<ActionMenu.Item onClick={() => console.log('Edit')}>Edit</ActionMenu.Item>
				<ActionMenu.Item onClick={() => console.log('Clone')}>Clone</ActionMenu.Item>
				<ActionMenu.Item onClick={() => console.log('Archive')}>Archive</ActionMenu.Item>
				<ActionMenu.Item onClick={() => console.log('Delete')} variant="danger">
					Delete
				</ActionMenu.Item>
			</ActionMenu>
		)}
	</Story>
	<Story
		name="bottom"
		args={{
			minWidth: 200,
			placement: 'bottom',
			title: 'bottom'
		}}
		parameters={getFixedStoryParams()}
	>
		{args => (
			<ActionMenu {...args}>
				<ActionMenu.Item onClick={() => console.log('Edit')}>Edit</ActionMenu.Item>
				<ActionMenu.Item onClick={() => console.log('Clone')}>Clone</ActionMenu.Item>
				<ActionMenu.Item onClick={() => console.log('Archive')}>Archive</ActionMenu.Item>
				<ActionMenu.Item onClick={() => console.log('Delete')} variant="danger">
					Delete
				</ActionMenu.Item>
			</ActionMenu>
		)}
	</Story>
	<Story
		name="right"
		args={{
			minWidth: 200,
			placement: 'right',
			title: 'right'
		}}
		parameters={getFixedStoryParams()}
	>
		{args => (
			<ActionMenu {...args}>
				<ActionMenu.Item onClick={() => console.log('Edit')}>Edit</ActionMenu.Item>
				<ActionMenu.Item onClick={() => console.log('Clone')}>Clone</ActionMenu.Item>
				<ActionMenu.Item onClick={() => console.log('Archive')}>Archive</ActionMenu.Item>
				<ActionMenu.Item onClick={() => console.log('Delete')} variant="danger">
					Delete
				</ActionMenu.Item>
			</ActionMenu>
		)}
	</Story>
</Canvas>

## Event trigger

The dropdown is shown when hovering the trigger by default. This can be changes using the `trigger` prop:

<Canvas>
	<Story
		name="show when hover"
		args={{
			minWidth: 200,
			placement: 'bottom',
			title: 'show when hover',
			trigger: 'mouseenter'
		}}
		parameters={getFixedStoryParams()}
	>
		{args => (
			<ActionMenu {...args}>
				<ActionMenu.Item onClick={() => console.log('Edit')}>Edit</ActionMenu.Item>
				<ActionMenu.Item onClick={() => console.log('Clone')}>Clone</ActionMenu.Item>
				<ActionMenu.Item onClick={() => console.log('Archive')}>Archive</ActionMenu.Item>
				<ActionMenu.Item onClick={() => console.log('Delete')} variant="danger">
					Delete
				</ActionMenu.Item>
			</ActionMenu>
		)}
	</Story>
	<Story
		name="show when click"
		args={{
			minWidth: 200,
			placement: 'bottom',
			title: 'show when click',
			trigger: 'click'
		}}
		parameters={getFixedStoryParams()}
	>
		{args => (
			<ActionMenu {...args}>
				<ActionMenu.Item onClick={() => console.log('Edit')}>Edit</ActionMenu.Item>
				<ActionMenu.Item onClick={() => console.log('Clone')}>Clone</ActionMenu.Item>
				<ActionMenu.Item onClick={() => console.log('Archive')}>Archive</ActionMenu.Item>
				<ActionMenu.Item onClick={() => console.log('Delete')} variant="danger">
					Delete
				</ActionMenu.Item>
			</ActionMenu>
		)}
	</Story>
</Canvas>

## ActionMenuItem Variants

The `ActionMenu.Item` can be different given a `variant` prop.

<Canvas>
	<Story
		name="items"
		args={{
			minWidth: 200,
			placement: 'bottom',
			title: 'items',
			trigger: 'click'
		}}
		parameters={getFixedStoryParams()}
	>
		{args => (
			<ActionMenu {...args}>
				<ActionMenu.Item onClick={() => console.log('Default')}>Default</ActionMenu.Item>
				<ActionMenu.Item onClick={() => console.log('Danger')} variant="danger">
					Danger
				</ActionMenu.Item>
			</ActionMenu>
		)}
	</Story>
</Canvas>

## ActionMenu API

<ArgsTable of={ActionMenu} />

## ActionMenu.Item API

<ArgsTable of={ActionMenu.Item} />
