import { ArgsTable, Meta, Story, Canvas } from 'storybook/utils/components';

import { getFixedStoryParams, getPlaygroundStoryParams } from 'storybook/parameters';
import { ToastsStory } from './Toasts';
import Toasts from 'components/Toasts';
import Icon from 'components/Icon';
import Text from 'components/Text';

<Meta title="Components/Toasts" component={Toasts} />

<Story name="playground" parameters={getPlaygroundStoryParams()}>
	{args => <ToastsStory {...args} />}
</Story>

# Toasts

The `Toasts` component gives a notification system based on toasts or floating alerts.

Most important features:

- Use same status variants from Alert component.
- Show toasts in different screen locations.
- Easily add and close toasts using the `useToasts` custom hook.
- Show a message text.
- Hide alert status icon if wanted.
- Show extra action content at right if wanted.
- Show a close button at right if wanted.
- Specify each toast duration individually or make it persistent (i.e. not hiding).

## Usage

- Use the `Toasts` component as a Provider at a higher level:

```tsx
import { Toasts } from '@sergiogc9/react-ui';

const App = () => {
  return (
    <Toasts placement='bottom-right'>
      {...}
    </Toasts>
  )
}
```

- Use the `addToast` and `closeToast` functions provided by `useToasts` custom hook. Remember that the component using the hook **must be wrapped with the Toasts component**.

```tsx
import { useToasts } from '@sergiogc9/react-ui';

const AwesomeComponent = () => {
  const { addToast } = useToasts();

  const onBtnClicked = React.useCallback(() => {
    addToast({key: new Date().getTime(), message: 'Example text'});
  },[addToast]);

  return (
    <Button onClick={onBtnClicked}>
      Add toast
    </Button>
    )
```

**IMPORTANT:** Use a time based key value!. Adding a toast using an existing key will cause the toast to be updated.

## Toast options

Use the **playground** story to see all available options live:

| Option          | Description                                                                                                                                 | Type               | Default |            |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------- | ------------------ | ------- | ---------- |
| `actionContent` | The content to be shown at right of the text. Can be any valid React element.                                                               | ReactNode          |         |            |
| `duration`      | The time in ms while the toast is shown, after this time the toast is dismissed automatically. Use an `always` value to make it persistent. | number or "always" | 5000    |            |
| `key`           | The toast identifier. Use a time-based key.                                                                                                 | string             |         | `required` |
| `hasIcon`       | Boolean to show or hide the default Alert icon related to its status.                                                                       | boolean            | true    |            |
| `hasCloseBtn`   | Boolean to show or hide the built-in close button at right.                                                                                 | boolean            | false   |            |
| `onClose`       | Handler called after the toast has been dismissed. It is called after the exit animation has been finished.                                 | Function           |         |            |
| `message`       | The text to be shown inside the toast.                                                                                                      | string             |         | `required` |
| `status`        | The Alert status. See the Alert component for further info.                                                                                 | enum               |

## Toasts API

<ArgsTable of={Toasts} />
