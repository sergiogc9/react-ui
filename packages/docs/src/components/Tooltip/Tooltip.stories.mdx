import { ArgsTable, Meta, Story, Canvas } from 'storybook/utils/components';
import { getFixedStoryParams, getPlaygroundStoryParams } from 'storybook/parameters';

import Flex from 'components/Flex';
import Icon from 'components/Icon';
import Tooltip from 'components/Tooltip';
import TooltipContent from 'components/Tooltip/Content';
import TooltipTrigger from 'components/Tooltip/Trigger';

import { TooltipWithoutProvider } from './Tooltip';

<Meta title="Components/Tooltip" component={TooltipContent} />

# Tooltip

This is a tooltip component, helpful to show content next of another one when hovering, clicking or focusing.

The Tooltip component is based on the `Popover` component.

<Story name="playground" args={{}} parameters={getPlaygroundStoryParams()}>
	{args => (
		<Tooltip>
			<Tooltip.Trigger>
				<Icon styling="filled" icon="info" fill="primary.500" />
			</Tooltip.Trigger>
			<Tooltip.Content {...args}>This is awesome</Tooltip.Content>
		</Tooltip>
	)}
</Story>

## Variants

There are two pre-defined variants. A customized tooltip can also be used:

<Canvas>
	<Story name="dark" parameters={getFixedStoryParams()}>
		{args => (
			<Tooltip>
				<Tooltip.Trigger>
					<Icon styling="filled" icon="info" fill="primary.500" />
				</Tooltip.Trigger>
				<Tooltip.Content variant="dark">This is awesome</Tooltip.Content>
			</Tooltip>
		)}
	</Story>
	<Story name="light" parameters={getFixedStoryParams()}>
		{args => (
			<Tooltip>
				<Tooltip.Trigger ml="150px">
					<Icon styling="filled" icon="info" fill="primary.500" />
				</Tooltip.Trigger>
				<Tooltip.Content variant="light">This is awesome</Tooltip.Content>
			</Tooltip>
		)}
	</Story>
	<Story name="custom" parameters={getFixedStoryParams()}>
		{args => (
			<Tooltip>
				<Tooltip.Trigger ml="150px">
					<Icon styling="filled" icon="info" fill="primary.500" />
				</Tooltip.Trigger>
				<Tooltip.Content bg="green.300" color="neutral.900">
					This is awesome
				</Tooltip.Content>
			</Tooltip>
		)}
	</Story>
</Canvas>

## Timing

You can change the enter and exit timing using the `enterDelay` and `exitDelay` props:

<Canvas>
	<Story name="enter timing" parameters={getFixedStoryParams()}>
		{args => (
			<Tooltip>
				<Tooltip.Trigger>
					<Icon styling="filled" icon="info" fill="primary.500" />
				</Tooltip.Trigger>
				<Tooltip.Content enterDelay={1000}>I took a second to be here!</Tooltip.Content>
			</Tooltip>
		)}
	</Story>
	<Story name="exit timing" parameters={getFixedStoryParams()}>
		{args => (
			<Tooltip>
				<Tooltip.Trigger ml="150px">
					<Icon styling="filled" icon="info" fill="primary.500" />
				</Tooltip.Trigger>
				<Tooltip.Content exitDelay={3000}>I will be gone in 3 seconds ðŸ˜„</Tooltip.Content>
			</Tooltip>
		)}
	</Story>
</Canvas>

## Interactive tooltip

By default, the tooltip is hidden when exiting the trigger. This behavior can be changed using the `isInteractive` prop:

<Canvas>
	<Story name="not interactive" parameters={getFixedStoryParams()}>
		{args => (
			<Tooltip>
				<Tooltip.Trigger>
					<Icon styling="filled" icon="info" fill="primary.500" />
				</Tooltip.Trigger>
				<Tooltip.Content isInteractive={false}>I'm hiding when you mouse out the icon</Tooltip.Content>
			</Tooltip>
		)}
	</Story>
	<Story name="interactive" parameters={getFixedStoryParams()}>
		{args => (
			<Tooltip>
				<Tooltip.Trigger ml="150px">
					<Icon styling="filled" icon="info" fill="primary.500" />
				</Tooltip.Trigger>
				<Tooltip.Content isInteractive={true}>I keep opened if you hover me</Tooltip.Content>
			</Tooltip>
		)}
	</Story>
</Canvas>

## Changing trigger event

By default, the tooltip is shown when hovering the trigger. You can change it using the `trigger` prop:

<Canvas>
	<Story name="on hover" parameters={getFixedStoryParams()}>
		{args => (
			<Tooltip>
				<Tooltip.Trigger width="fit-content">Hover me</Tooltip.Trigger>
				<Tooltip.Content trigger="mouseenter focus">You hovered it!</Tooltip.Content>
			</Tooltip>
		)}
	</Story>
	<Story name="on click" parameters={getFixedStoryParams()}>
		{args => (
			<Tooltip>
				<Tooltip.Trigger ml="150px" width="fit-content">
					Click me
				</Tooltip.Trigger>
				<Tooltip.Content trigger="click">You clicked it!</Tooltip.Content>
			</Tooltip>
		)}
	</Story>
</Canvas>

## Using without provider and trigger

You can use the tooltip without the provider and trigger, using the `reference` prop with the element that will act as the trigger.

<Canvas>
	<Story
		name="without provider"
		parameters={{
			...getFixedStoryParams(),
			docs: {
				source: {
					code: `
  const ref = React.useRef(null);
  return (
      <Flex ref={ref}>Hover me</Flex>
      <Tooltip.Content reference={ref}>
        I am not using the provider!
      </Tooltip.Content>
  );
};`
				}
			}
		}}
	>
		{args => <TooltipWithoutProvider />}
	</Story>
</Canvas>

## Positioning

You can locate the tooltip in different places around the trigger component. See the `placement` prop for all values:

<Canvas>
	<Story name="positioning" parameters={getFixedStoryParams()}>
		{args =>
			['top', 'left', 'right', 'bottom'].map(position => (
				<Flex key={`${position}-div`} py={5} flexWrap="wrap">
					{['', '-end', '-start'].map((alignment, index) => (
						<Tooltip key={`${position}${alignment}`}>
							<Tooltip.Trigger mx="140px" my="60px">
								<Icon styling="filled" icon="info" fill="primary.500" />
							</Tooltip.Trigger>
							<Tooltip.Content isVisible={true} placement={`${position}${alignment}`} width="180px">
								{`This is the tooltip content with position: ${position}${alignment}`}
							</Tooltip.Content>
						</Tooltip>
					))}
				</Flex>
			))
		}
	</Story>
</Canvas>

# Tooltip Content API

<ArgsTable of={TooltipContent} />

# Tooltip Trigger API

<ArgsTable of={TooltipTrigger} />
